--
-- Creates a simple table, enables logging but then disables it twice (which should raise an exception)
--
BEGIN;
CREATE EXTENSION recall;
CREATE TABLE config (
	key VARCHAR(100) PRIMARY KEY,
	value TEXT
);
SELECT recall_enable('config', '2 months');
 recall_enable 
---------------
 
(1 row)

SELECT recall_disable('config');
 recall_disable 
----------------
 
(1 row)

-- ok, everything should have worked as planned so far, but this next call should trigger an exception
SELECT recall_disable('config');
ERROR:  The table "config" is not managed by pg_recall
ROLLBACK;
